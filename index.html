<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Use Cases and Requirements on HTTPS-enabled Local Network Servers</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
	/* } */

	@supports (display:grid) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover {
			background: rgba(75%, 75%, 75%, .25);
			border-bottom: 3px solid #054572;
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version db559f98d6c99655936abc96647a0e88ba98a9cf" name="generator">
  <link href="https://httpslocal.github.io/usecases/" rel="canonical">
  <meta content="b4306013af298caa3f96a88987884617779e9a6d" name="document-revision">
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: #DDDDDD;
    color: black;
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: black; }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Use Cases and Requirements on HTTPS-enabled Local Network Servers</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="2019-09-02">2 September 2019</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://httpslocal.github.io/usecases/">https://httpslocal.github.io/usecases/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/httpslocal/usecases/issues/">GitHub</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://github.com/httpslocal/usecases/graphs/contributors">Contributors on GitHub</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2019 the Contributors to the Use Cases and Requirements on HTTPS-enabled Local Network Servers Specification, published by the <a href="https://www.w3.org/community/httpslocal/">HTTPS in Local Network Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document describes use cases of HTTPS-enabled local network servers and requirements for their HTTPS deployment.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/httpslocal/">HTTPS in Local Network Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#usecases"><span class="secno">2</span> <span class="content">Use cases</span></a>
     <ol class="toc">
      <li><a href="#uc-01"><span class="secno">2.1</span> <span class="content">UC-01: Playing audio content in a home storage device from a cloud service</span></a>
      <li><a href="#uc-02"><span class="secno">2.2</span> <span class="content">UC-02: Video streaming with cache storage in local network</span></a>
      <li><a href="#uc-03"><span class="secno">2.3</span> <span class="content">UC-03: Web-based UI for home appliances (input/output constrained devices)</span></a>
      <li><a href="#uc-04"><span class="secno">2.4</span> <span class="content">UC-04: Embedded system monitoring and controlling for display-capable devices</span></a>
      <li><a href="#uc-05"><span class="secno">2.5</span> <span class="content">UC-05: Data analysis from analytical and measuring instruments in local network</span></a>
      <li><a href="#uc-06"><span class="secno">2.6</span> <span class="content">UC-06: Photo sharing between online services and home NAS devices</span></a>
      <li><a href="#uc-07"><span class="secno">2.7</span> <span class="content">UC-07: Secure offline communication for home automation</span></a>
      <li><a href="#uc-08"><span class="secno">2.8</span> <span class="content">UC-08: Companion Device for Broadcast Interactive Service</span></a>
      <li><a href="#uc-09"><span class="secno">2.9</span> <span class="content">UC-09: Presenting with Projector at office</span></a>
     </ol>
    <li>
     <a href="#requirements"><span class="secno">3</span> <span class="content">Requirements</span></a>
     <ol class="toc">
      <li><a href="#req-terminology"><span class="secno">3.1</span> <span class="content">Terminology</span></a>
      <li>
       <a href="#req-functional"><span class="secno">3.2</span> <span class="content">Functional Requirements</span></a>
       <ol class="toc">
        <li><a href="#req-guarantee-of-device-trustworthiness"><span class="secno">3.2.1</span> <span class="content">Guarantee of Device Trustworthiness</span></a>
        <li><a href="#req-device-identification"><span class="secno">3.2.2</span> <span class="content"><span>Device Identification</span></span></a>
        <li><a href="#req-alerting-user"><span class="secno">3.2.3</span> <span class="content">Alerting User and User Consent</span></a>
        <li><a href="#req-certificate-management"><span class="secno">3.2.4</span> <span class="content">Certificate Management</span></a>
        <li><a href="#req-device-discovery"><span class="secno">3.2.5</span> <span class="content"><span>Device Discovery</span></span></a>
       </ol>
      <li>
       <a href="#req-non-funcational-req"><span class="secno">3.3</span> <span class="content">Non-Functional Requirements</span></a>
       <ol class="toc">
        <li><a href="#req-security"><span class="secno">3.3.1</span> <span class="content">Security</span></a>
        <li><a href="#req-privacy"><span class="secno">3.3.2</span> <span class="content">Privacy</span></a>
        <li><a href="#req-availability"><span class="secno">3.3.3</span> <span class="content">Availability</span></a>
        <li><a href="#req-scalability"><span class="secno">3.3.4</span> <span class="content">Scalability</span></a>
        <li><a href="#req-user-experience"><span class="secno">3.3.5</span> <span class="content">User Experience</span></a>
       </ol>
     </ol>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>This document describes use cases where browsers communicate with
web-server-capable devices in local network via HTTP (<code>https://</code>) and/or
WebSocket over TLS (<code>wss://</code>), as well as network, security, and privacy
requirements on these usage.</p>
   <p>Nowadays, a lot of devices like Internet-of-Things (IoT) devices and home
gateways often have their own built-in HTTP server so that they can provide
interfaces to configure and/or control them remotely via IPv4/IPv6 local
network. Modern web browsers, however, usually regard those local servers as not
trustworthy due to lack of authenticity of device’s identity. As a result,
browsers would prevent trustworthy web sites from communicating to local network
devices <a data-link-type="biblio" href="#biblio-mixed-content">[MIXED-CONTENT]</a> and prohibit web pages on the servers from accessing
powerful features on browsers <a data-link-type="biblio" href="#biblio-secure-contexts">[SECURE-CONTEXTS]</a>.</p>
   <p>Therefore, this document illustrates potential use cases that need access to
local network servers and clarifies requirements for use of these servers.</p>
   <h2 class="heading settled" data-level="2" id="usecases"><span class="secno">2. </span><span class="content">Use cases</span><a class="self-link" href="#usecases"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="uc-01"><span class="secno">2.1. </span><span class="content">UC-01: Playing audio content in a home storage device from a cloud service</span><a class="self-link" href="#uc-01"></a></h3>
   <p>Users can store their audio contents in their storage device, or set-top boxes,
in their home. They access online music web services with web browsers, and use
a music player implemented as a web application in the web services to play
music stored in their home network. The music player send metadata of the music
to the web service, to recommend another music content.</p>
   <h3 class="heading settled" data-level="2.2" id="uc-02"><span class="secno">2.2. </span><span class="content">UC-02: Video streaming with cache storage in local network</span><a class="self-link" href="#uc-02"></a></h3>
   <p>A user has a video cache storage server for home to enjoy online video streaming
services at UHDTV quality. When she opens the web site of one of the streaming
services on her TV browser, the web page tries to find her cache storage and
displays a list of storages via a popup window. She picks up one storage from
the list to store caches of UHDTV video stream segments. After her permission,
the streaming web application of the service can start prefetching or fetching
UHDTV movies purchased or bookmarked by her and upload those segments to the
storage. When she wants to watch one of the movies cached in the storage, the
online service fetches the movie from the home storage to avoid consuming WAN
traffic, and finally she can comfortably enjoy the movie.</p>
   <figure id="fig-uc02"><img src="figs/uc02.jpg"></figure>
   <h3 class="heading settled" data-level="2.3" id="uc-03"><span class="secno">2.3. </span><span class="content">UC-03: Web-based UI for home appliances (input/output constrained devices)</span><a class="self-link" href="#uc-03"></a></h3>
   <p>A user controls home appliances (e.g. air conditioner, microwave oven,
refrigerator) with an online GUI service on the internet. The home appliances
are designed natively to be used via the online GUI loaded in a browser on her
smartphone or tablet. As with the use cases mentioned above, when she signs in
to the online service, the service finds a home appliance through the browser.
Under her approval, the service can be granted access privileges for the
appliance and she can control it through the GUI service.</p>
   <figure id="fig-uc03"><img src="figs/uc03.jpg"></figure>
   <h3 class="heading settled" data-level="2.4" id="uc-04"><span class="secno">2.4. </span><span class="content">UC-04: Embedded system monitoring and controlling for display-capable devices</span><a class="self-link" href="#uc-04"></a></h3>
   <p>A field engineer of a digital signage service provider sets up an
internet-capable display device. The engineer makes the device display a
specific website as a signage content by using a browser on the device. After
that, the website is monitoring the status of the embedded system (e.g.
collecting logs, monitoring system resource utilization) continuously via the
browser by using internal REST APIs provided by an internal web server (e.g.
https://localhost) of the device. If the device provides the website with reboot
functionality as one of the REST APIs, the service provider is able to not only
check the health of the device, if necessary, but also reboot the device
remotely via the website. This use case is about Network based API described in
NetworkedBasedAPI.md</p>
   <figure id="fig-uc04"><img src="figs/uc04.jpg"></figure>
   <h3 class="heading settled" data-level="2.5" id="uc-05"><span class="secno">2.5. </span><span class="content">UC-05: Data analysis from analytical and measuring instruments in local network</span><a class="self-link" href="#uc-05"></a></h3>
   <p>An analytical and measuring instrument in local network outputs a large amount
of raw data as the result of an experiment. An experimenter (a user of the
instrument) signs in to a web-based analytical service provided by the vender of
the instrument by using a browser in her PC. The experimenter analyzes the raw
data by using the web service and the service fetches the raw data from the
instrument directly in local network.</p>
   <figure id="fig-uc05"><img src="figs/uc05.jpg"></figure>
   <h3 class="heading settled" data-level="2.6" id="uc-06"><span class="secno">2.6. </span><span class="content">UC-06: Photo sharing between online services and home NAS devices</span><a class="self-link" href="#uc-06"></a></h3>
   <p>A user usually stores her private photos and videos in a home NAS device. She
opens an online photo sharing service in a browser on her smartphone. The online
service finds her home NAS device through the browser and shows her the NAS via
a popup window. She selects the NAS and the browser shows her private photos in
the NAS as well as the ones already stored in the online service. She then
selects and posts some photos that she would like to share with her friends or,
if she usually posts photos to the online service from her smartphone directly,
she downloads the photos and posts them to the NAS device.</p>
   <figure id="fig-uc06"><img src="figs/uc06.jpg"></figure>
   <h3 class="heading settled" data-level="2.7" id="uc-07"><span class="secno">2.7. </span><span class="content">UC-07: Secure offline communication for home automation</span><a class="self-link" href="#uc-07"></a></h3>
   <p>A user wants to set up a new home device (e.g., a Wi-Fi access point/router,
home automation gateway) in his/her home via its web interface.
User typically opens a given URL for the device (e.g., https://home-router.local, or https://192.168.1.1)
in a laptop or smart phone’s web browser. Since the new device does not have
a valid web PKI certificate, the web browser displays a warning like 
“The connection is not secure” but provides an option to ask the user to
approve the access or add the URL as an exception to the whitelist.
Once user takes the action, the web browser treats the device as a trusted one
and does not display the warning in subsequent attempts. Additionally, if the
home device supports functionality such as, SSO (Single Sign-On) the user can
use an identity (ID) provider’s account (e.g., Google, Facebook, and so on)
to sign in the device’s web interface and provide the needed trust.</p>
   <p>Similar secure access is required when a home gateway, which is typically
controlling other home devices (e.g., door locks, security cameras), 
uses HTTPS for securely accepting commands via a remote server. 
However, when a home gateway happens to get temporarily disconnected
from the internet, those home devices become inaccessible. 
In such scenarios, a local HTTPS communication from user’s
local device (e.g., smart phone or a control device) is essential to control
and operate the home devices directly through HTTPS connections over the local network.</p>
   <h3 class="heading settled" data-level="2.8" id="uc-08"><span class="secno">2.8. </span><span class="content">UC-08: Companion Device for Broadcast Interactive Service</span><a class="self-link" href="#uc-08"></a></h3>
   <p>A user is watching a broadcast interactive service which is enhanced by a
broadcaster’s web app running on the user agent of TV. The user hands a
companion device, e.g. Smartphone, and launches a user agent with the Frontend
page from the broadcaster web server. The Frontend page discovers the user-agent
of TV and securely communicates with the broadcaster’s web application via the
Web Socket Server on TV in order to provide GUI for the interactive broadcast
service. Note that this use case is similar to the 2-UA of the Presentation API
but the difference is that the broadcaster’s web application on TV is running on
UA of TV in advance.</p>
   <figure id="fig-uc08"><img src="figs/uc08.jpg"></figure>
   <h3 class="heading settled" data-level="2.9" id="uc-09"><span class="secno">2.9. </span><span class="content">UC-09: Presenting with Projector at office</span><a class="self-link" href="#uc-09"></a></h3>
   <p>A user is attending a meeting at office (outside home). The user logs on an
online document sharing service on PC and present his document file on the
service with the Projector connected via local network. FrontEnd page on UA1 at
PC initiates to launch 2nd frontend page on 2nd UA at the projector to let the
2nd frontend page present the document. Note that this use case is similar to
2-UA of Presentation API but the communication between 2-UA should be secured to
prevent the MITM attack in the local network and also the regular WebSocket API
is used for the communication, e.g. file transfer.</p>
   <figure id="fig-uc09"><img src="figs/uc09.jpg"></figure>
   <h2 class="heading settled" data-level="3" id="requirements"><span class="secno">3. </span><span class="content">Requirements</span><a class="self-link" href="#requirements"></a></h2>
   <p>This section outlines functional and non-functional requirements of HTTPS/WSS
usage in local network represented in <a href="#usecases">§2 Use cases</a>.</p>
   <p>Functional requirements consist of guarantee of device trustworthiness,
device identification, alerting user and user consent, device discovery,
and certificate management.</p>
   <p>Non-functional requirements address security, privacy, availability, scalability,
and user experience aspects of HTTPS/WSS usage in local network.</p>
   <h3 class="heading settled" data-level="3.1" id="req-terminology"><span class="secno">3.1. </span><span class="content">Terminology</span><a class="self-link" href="#req-terminology"></a></h3>
   <p>A user agent (<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ua">UA</dfn>) is a web browser on a user’s PC, smartphone, tablet
and so on, which is connected to a local network.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="device">device</dfn> is in the same local network as the <a data-link-type="dfn" href="#ua" id="ref-for-ua">UA</a>, capable of HTTPS/WSS server.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="web-service">web service</dfn> is a service hosted on the internet and whose frontend is
loaded on the <a data-link-type="dfn" href="#ua" id="ref-for-ua①">UA</a>, which accesses to the <a data-link-type="dfn" href="#device" id="ref-for-device">device</a> with HTTPS or WSS on the local network.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="web-pki-certificate">Web PKI certificate</dfn> is a TLS server certificate that can chain up to
a root CA (Certificate Authority) trusted by the <a data-link-type="dfn" href="#ua" id="ref-for-ua②">UA</a> (preinstalled on the <a data-link-type="dfn" href="#ua" id="ref-for-ua③">UA</a>).</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="non-web-pki-certificate">non-Web PKI certificate</dfn> is a TLS server certificate that cannot chain
up to a root CA, or a self-signed certificate.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ca">CA</dfn> (merely called <code>CA</code> in this document) is a CA responsible for issuing the <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate">Web PKI certificate</a>s or <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificate">non-Web PKI certificate</a>s.
It is not restricted to a CA responsible only for issuing the <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate①">Web PKI certificate</a>s.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="private-ca">private CA</dfn> is a CA responsible for issuing the <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificate①">non-Web PKI certificate</a>s.</p>
   <h3 class="heading settled" data-level="3.2" id="req-functional"><span class="secno">3.2. </span><span class="content">Functional Requirements</span><a class="self-link" href="#req-functional"></a></h3>
   <p>The functional requirements are listed below:</p>
   <ul>
    <li data-md>
     <p>Guarantee of Device Trustworthiness</p>
    <li data-md>
     <p>Device Identification</p>
    <li data-md>
     <p>Alerting User and User Consent</p>
    <li data-md>
     <p>Certificate Management</p>
    <li data-md>
     <p>Device Discovery</p>
   </ul>
   <p>In the following, we elaborate on individual requirements as mentioned above.</p>
   <h4 class="heading settled" data-level="3.2.1" id="req-guarantee-of-device-trustworthiness"><span class="secno">3.2.1. </span><span class="content">Guarantee of Device Trustworthiness</span><a class="self-link" href="#req-guarantee-of-device-trustworthiness"></a></h4>
   <p>The <a data-link-type="dfn" href="#ua" id="ref-for-ua④">UA</a> accesses the <a data-link-type="dfn" href="#device" id="ref-for-device①">device</a> with TLS (HTTPS or WSS) in all of the use cases envisioned so far.
If the <a data-link-type="dfn" href="#ua" id="ref-for-ua⑤">UA</a> cannot trust the <a data-link-type="dfn" href="#device" id="ref-for-device②">device</a>’s TLS server certificate,
the <a data-link-type="dfn" href="#ua" id="ref-for-ua⑥">UA</a> shows a warning message that means the <a data-link-type="dfn" href="#device" id="ref-for-device③">device</a> cannot be trusted.
To avoid it, the <a data-link-type="dfn" href="#device" id="ref-for-device④">device</a> shall have a way to prove its trustworthiness to the <a data-link-type="dfn" href="#ua" id="ref-for-ua⑦">UA</a>.</p>
   <p>Getting a <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate②">Web PKI certificate</a> is one of the ways to prove the <a data-link-type="dfn" href="#device" id="ref-for-device⑤">device</a> trustworthiness
but the <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate③">Web PKI certificate</a> only works for globally unique domains,
which must be registered in public DNS servers. For this scenario, the requirement is that</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#device" id="ref-for-device⑥">device</a> has a <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate④">Web PKI certificate</a> and has a way to obtain it.</p>
   </ul>
   <p>However, one may choose to use a memorable simple private domain name (e.g., “myprinter.local”)
or may not want to register the <a data-link-type="dfn" href="#device" id="ref-for-device⑦">device</a> name to the public DNS server because of
privacy concerns. In such scenarios, it is better not to use the <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate⑤">Web PKI certificate</a> for the <a data-link-type="dfn" href="#device" id="ref-for-device⑧">device</a>,
however, the <a data-link-type="dfn" href="#device" id="ref-for-device⑨">device</a> and/or the <a data-link-type="dfn" href="#ua" id="ref-for-ua⑧">UA</a> shall have one of the following features or methods:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#device" id="ref-for-device①⓪">device</a> has a way to obtain and use a <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificate②">non-Web PKI certificate</a> and
the <a data-link-type="dfn" href="#ua" id="ref-for-ua⑨">UA</a> has some out-of-band mechanisms to validate the certificate as a trusted one
(e.g., the user and/or the web service’s approval).</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#device" id="ref-for-device①①">device</a> does not have a certificate but the <a data-link-type="dfn" href="#ua" id="ref-for-ua①⓪">UA</a> has a way to validate
and trust the <a data-link-type="dfn" href="#device" id="ref-for-device①②">device</a> without any certificates (e.g., by using a PSK (pre-shared key)
or an RPK (raw public key)), which is shared to the <a data-link-type="dfn" href="#ua" id="ref-for-ua①①">UA</a> in a secure way.</p>
   </ul>
   <h4 class="heading settled" data-level="3.2.2" id="req-device-identification"><span class="secno">3.2.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="device-identification">Device Identification</dfn></span><a class="self-link" href="#req-device-identification"></a></h4>
   <p>In case that the user inputs the device URL to the address bar of the <a data-link-type="dfn" href="#ua" id="ref-for-ua①②">UA</a> directly (<a href="#uc-07">§2.7 UC-07: Secure offline communication for home automation</a>)
or the <a data-link-type="dfn" href="#ua" id="ref-for-ua①③">UA</a> shows the popup window to the user to get the user’s consent (<a href="#uc-02">§2.2 UC-02: Video streaming with cache storage in local network</a>, <a href="#uc-03">§2.3 UC-03: Web-based UI for home appliances (input/output constrained devices)</a>),
the user may be able to recognize that the device URL displayed or input on the <a data-link-type="dfn" href="#ua" id="ref-for-ua①④">UA</a> indicates the real device on the local network. In such cases, the <a data-link-type="dfn" href="#device" id="ref-for-device①③">device</a> and/or
the <a data-link-type="dfn" href="#ua" id="ref-for-ua①⑤">UA</a> shall meet the following requirements:</p>
   <ul>
    <li data-md>
     <p>The device identifier (domain name) should be easy to remember and short enough but
not to recognize as fraudulent by anti-phishing.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#device" id="ref-for-device①④">device</a> and the <a data-link-type="dfn" href="#ua" id="ref-for-ua①⑥">UA</a> should have a pairing method by using the device
interface (e.g., pushing a specific button on the <a data-link-type="dfn" href="#device" id="ref-for-device①⑤">device</a> to start the pairing,
showing the PIN code for the pairing on the <a data-link-type="dfn" href="#device" id="ref-for-device①⑥">device</a>’s display).</p>
   </ul>
   <h4 class="heading settled" data-level="3.2.3" id="req-alerting-user"><span class="secno">3.2.3. </span><span class="content">Alerting User and User Consent</span><a class="self-link" href="#req-alerting-user"></a></h4>
   <p>The frontend of the <a data-link-type="dfn" href="#web-service" id="ref-for-web-service">web service</a> loaded on the <a data-link-type="dfn" href="#ua" id="ref-for-ua①⑦">UA</a> should not be able to access the <a data-link-type="dfn" href="#device" id="ref-for-device①⑦">device</a> without an explicit approval from the user especially during its first time access.
This is essential in cases where the <a data-link-type="dfn" href="#device" id="ref-for-device①⑧">device</a> is not capable of using a <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate⑥">Web PKI certificate</a>.
In such cases, the <a data-link-type="dfn" href="#ua" id="ref-for-ua①⑧">UA</a> will possibly use an alternative identifier (e.g., <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificate③">non-Web PKI certificate</a>, PSK, RPK)
but it must not be trusted without the user’s consent.
Therefore, considering the <a data-link-type="dfn" href="#ua" id="ref-for-ua①⑨">UA</a> shall meet the following requirement:</p>
   <ul>
    <li data-md>
     <p>When the frontend of the <a data-link-type="dfn" href="#web-service" id="ref-for-web-service①">web service</a> requests the <a data-link-type="dfn" href="#ua" id="ref-for-ua②⓪">UA</a> to access the <a data-link-type="dfn" href="#device" id="ref-for-device①⑨">device</a> in local network,
the <a data-link-type="dfn" href="#ua" id="ref-for-ua②①">UA</a> shall show a popup window to obtain the user’s consent and shall permit
the access only if the user approve the access.</p>
    <li data-md>
     <p>When the <a data-link-type="dfn" href="#device" id="ref-for-device②⓪">device</a> does not use a <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate⑦">Web PKI certificate</a> for HTTPS/WSS communication,
the <a data-link-type="dfn" href="#ua" id="ref-for-ua②②">UA</a> shall have a way to obtain user’s consent to trust an alternative identifier
(e.g., <a data-link-type="dfn" href="#non-web-pki-certificate" id="ref-for-non-web-pki-certificate④">non-Web PKI certificate</a>, PSK, RPK).</p>
   </ul>
   <h4 class="heading settled" data-level="3.2.4" id="req-certificate-management"><span class="secno">3.2.4. </span><span class="content">Certificate Management</span><a class="self-link" href="#req-certificate-management"></a></h4>
   <p>When the <a data-link-type="dfn" href="#device" id="ref-for-device②①">device</a> obtains a TLS server certificate for HTTPS/WSS communication,
the <a data-link-type="dfn" href="#ca" id="ref-for-ca">CA</a>, <a data-link-type="dfn" href="#ua" id="ref-for-ua②③">UA</a> and the <a data-link-type="dfn" href="#device" id="ref-for-device②②">device</a> shall meet the following requirements:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#ca" id="ref-for-ca①">CA</a> that issues certificates for <a data-link-type="dfn" href="#device" id="ref-for-device②③">device</a>s shall be able to revoke the certificates.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#ua" id="ref-for-ua②④">UA</a> shall be able to detect the revocation of the <a data-link-type="dfn" href="#device" id="ref-for-device②④">device</a>’s certificate.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#device" id="ref-for-device②⑤">device</a> shall be able to refresh the certificate at any time.</p>
   </ul>
   <h4 class="heading settled" data-level="3.2.5" id="req-device-discovery"><span class="secno">3.2.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="device-discovery">Device Discovery</dfn></span><a class="self-link" href="#req-device-discovery"></a></h4>
   <p>As described in <a href="#uc-02">§2.2 UC-02: Video streaming with cache storage in local network</a> and <a href="#uc-03">§2.3 UC-03: Web-based UI for home appliances (input/output constrained devices)</a>, when the <a data-link-type="dfn" href="#web-service" id="ref-for-web-service②">web service</a> does not know the device URL in advance,
the <a data-link-type="dfn" href="#device" id="ref-for-device②⑥">device</a> needs to be discovered. That means the discovery process must meet the following requirements:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#ua" id="ref-for-ua②⑤">UA</a> shall be able to discover the presence of <a data-link-type="dfn" href="#device" id="ref-for-device②⑦">device</a>s in the same local network.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#ua" id="ref-for-ua②⑥">UA</a> shall be able to obtain the endpoint URL of the <a data-link-type="dfn" href="#device" id="ref-for-device②⑧">device</a> that has the scheme <code>https://</code> or <code>wss://</code>.</p>
    <li data-md>
     <p>When the <a data-link-type="dfn" href="#ua" id="ref-for-ua②⑦">UA</a> finds multiple <a data-link-type="dfn" href="#device" id="ref-for-device②⑨">device</a>s, the <a data-link-type="dfn" href="#ua" id="ref-for-ua②⑧">UA</a> shall be able to present the selector interface
to display the list of the <a data-link-type="dfn" href="#device" id="ref-for-device③⓪">device</a>s and allow the user to select one specific <a data-link-type="dfn" href="#device" id="ref-for-device③①">device</a>.</p>
   </ul>
   <h3 class="heading settled" data-level="3.3" id="req-non-funcational-req"><span class="secno">3.3. </span><span class="content">Non-Functional Requirements</span><a class="self-link" href="#req-non-funcational-req"></a></h3>
   <p>The non-functional requirements are listed below:</p>
   <ul>
    <li data-md>
     <p>Security</p>
    <li data-md>
     <p>Privacy</p>
    <li data-md>
     <p>Availability</p>
    <li data-md>
     <p>Scalability</p>
    <li data-md>
     <p>User Experience</p>
   </ul>
   <h4 class="heading settled" data-level="3.3.1" id="req-security"><span class="secno">3.3.1. </span><span class="content">Security</span><a class="self-link" href="#req-security"></a></h4>
   <p>It is essential to take care of the following security considerations:</p>
   <ul>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#device" id="ref-for-device③②">device</a> uses a TLS server certificate for HTTPS/WSS communication,
the certificate issuance and renewal steps shall prevent passive network
eavesdroppers from learning information related to the identification or certificate
exchanged among the system components (the CA, the <a data-link-type="dfn" href="#device" id="ref-for-device③③">device</a>, the <a data-link-type="dfn" href="#ua" id="ref-for-ua②⑨">UA</a> and the <a data-link-type="dfn" href="#web-service" id="ref-for-web-service③">web service</a>).</p>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#device" id="ref-for-device③④">device</a> uses a TLS server certificate for HTTPS/WSS communication,
the certificate issuance and renewal steps shall prevent active network attackers
from impersonating a <a data-link-type="dfn" href="#device" id="ref-for-device③⑤">device</a> and observing or altering data intended for the <a data-link-type="dfn" href="#ca" id="ref-for-ca②">CA</a> or for the <a data-link-type="dfn" href="#ua" id="ref-for-ua③⓪">UA</a>.</p>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#device" id="ref-for-device③⑥">device</a> does not use a TLS server certificate, alternate steps for the <a data-link-type="dfn" href="#ua" id="ref-for-ua③①">UA</a> to initiate a TLS session to the <a data-link-type="dfn" href="#device" id="ref-for-device③⑦">device</a> (e.g., sharing and using a PSK or a RPK)
shall prevent passive network eavesdroppers from getting the PSK or the private key of the RPK.</p>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#device" id="ref-for-device③⑧">device</a> does not use a TLS server certificate, alternate steps for the <a data-link-type="dfn" href="#ua" id="ref-for-ua③②">UA</a> to initiate a TLS session to the <a data-link-type="dfn" href="#device" id="ref-for-device③⑨">device</a> (e.g., sharing and using a PSK or a RPK)
shall prevent active network attackers from impersonating a <a data-link-type="dfn" href="#device" id="ref-for-device④⓪">device</a> and observing or
altering the keys for the <a data-link-type="dfn" href="#ua" id="ref-for-ua③③">UA</a>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#device-identification" id="ref-for-device-identification">Device identification</a> (e.g., the pairing method mentioned above) shall prevent
passive network eavesdroppers from learning information related to identification.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#device-identification" id="ref-for-device-identification①">Device identification</a> and <a data-link-type="dfn" href="#device-discovery" id="ref-for-device-discovery">device discovery</a> (if the <a data-link-type="dfn" href="#ua" id="ref-for-ua③④">UA</a> supports it) shall prevent
active network attackers from impersonating a <a data-link-type="dfn" href="#device" id="ref-for-device④①">device</a> and observing or altering
data intended for the <a data-link-type="dfn" href="#ca" id="ref-for-ca③">CA</a> or for the <a data-link-type="dfn" href="#ua" id="ref-for-ua③⑤">UA</a>.</p>
   </ul>
   <h4 class="heading settled" data-level="3.3.2" id="req-privacy"><span class="secno">3.3.2. </span><span class="content">Privacy</span><a class="self-link" href="#req-privacy"></a></h4>
   <p>The user privacy shall be preserved against the <a data-link-type="dfn" href="#web-service" id="ref-for-web-service④">web service</a> especially when the user
allows the frontend of the <a data-link-type="dfn" href="#web-service" id="ref-for-web-service⑤">web service</a> to access the <a data-link-type="dfn" href="#device" id="ref-for-device④②">device</a> for private use.  In such scenarios,
the <a data-link-type="dfn" href="#ua" id="ref-for-ua③⑥">UA</a> and the <a data-link-type="dfn" href="#device" id="ref-for-device④③">device</a> shall meet the following requirements:</p>
   <ul>
    <li data-md>
     <p>When the <a data-link-type="dfn" href="#ua" id="ref-for-ua③⑦">UA</a> supports <a data-link-type="dfn" href="#device-discovery" id="ref-for-device-discovery①">device discovery</a> functionality mentioned above and the <a data-link-type="dfn" href="#ua" id="ref-for-ua③⑧">UA</a> finds
multiple <a data-link-type="dfn" href="#device" id="ref-for-device④④">device</a>s, <a data-link-type="dfn" href="#ua" id="ref-for-ua③⑨">UA</a> shall disclose only one <a data-link-type="dfn" href="#device" id="ref-for-device④⑤">device</a> selected by the user.</p>
    <li data-md>
     <p>To avoid disclosing the device name and the IP address to the internet,
the <a data-link-type="dfn" href="#device" id="ref-for-device④⑥">device</a> should be able to use a private domain name.</p>
    <li data-md>
     <p>To avoid user tracking by means of using the <a data-link-type="dfn" href="#device" id="ref-for-device④⑦">device</a>, the evice identifier
(e.g., a TLS server certificate for the <a data-link-type="dfn" href="#device" id="ref-for-device④⑧">device</a>) should not be static and preinstalled.
The <a data-link-type="dfn" href="#device" id="ref-for-device④⑨">device</a> should be capable of obtaining the TLS server certificate dynamically
for HTTPS/WSS communication during commissioning.</p>
   </ul>
   <h4 class="heading settled" data-level="3.3.3" id="req-availability"><span class="secno">3.3.3. </span><span class="content">Availability</span><a class="self-link" href="#req-availability"></a></h4>
   <p>In scenarios (e.g., <a href="#uc-07">§2.7 UC-07: Secure offline communication for home automation</a>) when the <a data-link-type="dfn" href="#device" id="ref-for-device⑤⓪">device</a> and the <a data-link-type="dfn" href="#ua" id="ref-for-ua④⓪">UA</a> gets temporarily disconnected from the internet,
the <a data-link-type="dfn" href="#ua" id="ref-for-ua④①">UA</a> and the <a data-link-type="dfn" href="#device" id="ref-for-device⑤①">device</a> should be able to communicate with each other on the local network.
Therefore, the <a data-link-type="dfn" href="#device" id="ref-for-device⑤②">device</a> and the local network system shall meet the following requirements:</p>
   <ul>
    <li data-md>
     <p>When the <a data-link-type="dfn" href="#device" id="ref-for-device⑤③">device</a> has a private domain name (e.g., <em>.local, </em>.home.arpa)
or a private IP address, a <a data-link-type="dfn" href="#private-ca" id="ref-for-private-ca">private CA</a> shall be able to issue a TLS server certificate for the <a data-link-type="dfn" href="#device" id="ref-for-device⑤④">device</a>.</p>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#device" id="ref-for-device⑤⑤">device</a> has a public domain name, the local network system should have a way to help
the <a data-link-type="dfn" href="#ua" id="ref-for-ua④②">UA</a> with resolving the public domain name without an internet connection
(e.g., without querying a public DNS server).</p>
   </ul>
   <h4 class="heading settled" data-level="3.3.4" id="req-scalability"><span class="secno">3.3.4. </span><span class="content">Scalability</span><a class="self-link" href="#req-scalability"></a></h4>
   <p>If all IoT devices started using <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate⑧">Web PKI certificate</a>s for HTTPS/WSS communication,
the number of certificates required will be significantly larger than the total number
of certificates exists today for public web servers.
Therefore, following exemption may be required:</p>
   <ul>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#device" id="ref-for-device⑤⑥">device</a> uses a <a data-link-type="dfn" href="#web-pki-certificate" id="ref-for-web-pki-certificate⑨">Web PKI certificate</a> for HTTPS/WSS communication,
the <a data-link-type="dfn" href="#ca" id="ref-for-ca④">CA</a> should be exempt to preserve CT (certificate transparency) logs for the <a data-link-type="dfn" href="#device" id="ref-for-device⑤⑦">device</a>s.</p>
   </ul>
   <h4 class="heading settled" data-level="3.3.5" id="req-user-experience"><span class="secno">3.3.5. </span><span class="content">User Experience</span><a class="self-link" href="#req-user-experience"></a></h4>
   <p>While the user interaction is required in certain scenarios, it should not be
a hindrance to providing a better user experience. Following requirements should be considered:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#ua" id="ref-for-ua④③">UA</a> should minimize user’s interaction for <a data-link-type="dfn" href="#device-identification" id="ref-for-device-identification②">device identification</a> as much as possible.</p>
    <li data-md>
     <p>If the <a data-link-type="dfn" href="#device" id="ref-for-device⑤⑧">device</a> uses a TLS server certificate for HTTPS/WSS communication,
the procedure of certificate grant and issuance and renewal should be automated
as much as possible so that the users' interaction can be greatly minimized.</p>
   </ul>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#ca">CA</a><span>, in §3.1</span>
   <li><a href="#device">device</a><span>, in §3.1</span>
   <li><a href="#device-discovery">Device Discovery</a><span>, in §3.2.5</span>
   <li><a href="#device-identification">Device Identification</a><span>, in §3.2.2</span>
   <li><a href="#non-web-pki-certificate">non-Web PKI certificate</a><span>, in §3.1</span>
   <li><a href="#private-ca">private CA</a><span>, in §3.1</span>
   <li><a href="#ua">UA</a><span>, in §3.1</span>
   <li><a href="#web-pki-certificate">Web PKI certificate</a><span>, in §3.1</span>
   <li><a href="#web-service">web service</a><span>, in §3.1</span>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-mixed-content">[MIXED-CONTENT]
   <dd>Mike West. <a href="https://www.w3.org/TR/mixed-content/">Mixed Content</a>. 2 August 2016. CR. URL: <a href="https://www.w3.org/TR/mixed-content/">https://www.w3.org/TR/mixed-content/</a>
   <dt id="biblio-secure-contexts">[SECURE-CONTEXTS]
   <dd>Mike West. <a href="https://www.w3.org/TR/secure-contexts/">Secure Contexts</a>. 15 September 2016. CR. URL: <a href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a>
  </dl>
  <aside class="dfn-panel" data-for="ua">
   <b><a href="#ua">#ua</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ua">3.1. Terminology</a> <a href="#ref-for-ua①">(2)</a> <a href="#ref-for-ua②">(3)</a> <a href="#ref-for-ua③">(4)</a>
    <li><a href="#ref-for-ua④">3.2.1. Guarantee of Device Trustworthiness</a> <a href="#ref-for-ua⑤">(2)</a> <a href="#ref-for-ua⑥">(3)</a> <a href="#ref-for-ua⑦">(4)</a> <a href="#ref-for-ua⑧">(5)</a> <a href="#ref-for-ua⑨">(6)</a> <a href="#ref-for-ua①⓪">(7)</a> <a href="#ref-for-ua①①">(8)</a>
    <li><a href="#ref-for-ua①②">3.2.2. Device Identification</a> <a href="#ref-for-ua①③">(2)</a> <a href="#ref-for-ua①④">(3)</a> <a href="#ref-for-ua①⑤">(4)</a> <a href="#ref-for-ua①⑥">(5)</a>
    <li><a href="#ref-for-ua①⑦">3.2.3. Alerting User and User Consent</a> <a href="#ref-for-ua①⑧">(2)</a> <a href="#ref-for-ua①⑨">(3)</a> <a href="#ref-for-ua②⓪">(4)</a> <a href="#ref-for-ua②①">(5)</a> <a href="#ref-for-ua②②">(6)</a>
    <li><a href="#ref-for-ua②③">3.2.4. Certificate Management</a> <a href="#ref-for-ua②④">(2)</a>
    <li><a href="#ref-for-ua②⑤">3.2.5. Device Discovery</a> <a href="#ref-for-ua②⑥">(2)</a> <a href="#ref-for-ua②⑦">(3)</a> <a href="#ref-for-ua②⑧">(4)</a>
    <li><a href="#ref-for-ua②⑨">3.3.1. Security</a> <a href="#ref-for-ua③⓪">(2)</a> <a href="#ref-for-ua③①">(3)</a> <a href="#ref-for-ua③②">(4)</a> <a href="#ref-for-ua③③">(5)</a> <a href="#ref-for-ua③④">(6)</a> <a href="#ref-for-ua③⑤">(7)</a>
    <li><a href="#ref-for-ua③⑥">3.3.2. Privacy</a> <a href="#ref-for-ua③⑦">(2)</a> <a href="#ref-for-ua③⑧">(3)</a> <a href="#ref-for-ua③⑨">(4)</a>
    <li><a href="#ref-for-ua④⓪">3.3.3. Availability</a> <a href="#ref-for-ua④①">(2)</a> <a href="#ref-for-ua④②">(3)</a>
    <li><a href="#ref-for-ua④③">3.3.5. User Experience</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="device">
   <b><a href="#device">#device</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-device">3.1. Terminology</a>
    <li><a href="#ref-for-device①">3.2.1. Guarantee of Device Trustworthiness</a> <a href="#ref-for-device②">(2)</a> <a href="#ref-for-device③">(3)</a> <a href="#ref-for-device④">(4)</a> <a href="#ref-for-device⑤">(5)</a> <a href="#ref-for-device⑥">(6)</a> <a href="#ref-for-device⑦">(7)</a> <a href="#ref-for-device⑧">(8)</a> <a href="#ref-for-device⑨">(9)</a> <a href="#ref-for-device①⓪">(10)</a> <a href="#ref-for-device①①">(11)</a> <a href="#ref-for-device①②">(12)</a>
    <li><a href="#ref-for-device①③">3.2.2. Device Identification</a> <a href="#ref-for-device①④">(2)</a> <a href="#ref-for-device①⑤">(3)</a> <a href="#ref-for-device①⑥">(4)</a>
    <li><a href="#ref-for-device①⑦">3.2.3. Alerting User and User Consent</a> <a href="#ref-for-device①⑧">(2)</a> <a href="#ref-for-device①⑨">(3)</a> <a href="#ref-for-device②⓪">(4)</a>
    <li><a href="#ref-for-device②①">3.2.4. Certificate Management</a> <a href="#ref-for-device②②">(2)</a> <a href="#ref-for-device②③">(3)</a> <a href="#ref-for-device②④">(4)</a> <a href="#ref-for-device②⑤">(5)</a>
    <li><a href="#ref-for-device②⑥">3.2.5. Device Discovery</a> <a href="#ref-for-device②⑦">(2)</a> <a href="#ref-for-device②⑧">(3)</a> <a href="#ref-for-device②⑨">(4)</a> <a href="#ref-for-device③⓪">(5)</a> <a href="#ref-for-device③①">(6)</a>
    <li><a href="#ref-for-device③②">3.3.1. Security</a> <a href="#ref-for-device③③">(2)</a> <a href="#ref-for-device③④">(3)</a> <a href="#ref-for-device③⑤">(4)</a> <a href="#ref-for-device③⑥">(5)</a> <a href="#ref-for-device③⑦">(6)</a> <a href="#ref-for-device③⑧">(7)</a> <a href="#ref-for-device③⑨">(8)</a> <a href="#ref-for-device④⓪">(9)</a> <a href="#ref-for-device④①">(10)</a>
    <li><a href="#ref-for-device④②">3.3.2. Privacy</a> <a href="#ref-for-device④③">(2)</a> <a href="#ref-for-device④④">(3)</a> <a href="#ref-for-device④⑤">(4)</a> <a href="#ref-for-device④⑥">(5)</a> <a href="#ref-for-device④⑦">(6)</a> <a href="#ref-for-device④⑧">(7)</a> <a href="#ref-for-device④⑨">(8)</a>
    <li><a href="#ref-for-device⑤⓪">3.3.3. Availability</a> <a href="#ref-for-device⑤①">(2)</a> <a href="#ref-for-device⑤②">(3)</a> <a href="#ref-for-device⑤③">(4)</a> <a href="#ref-for-device⑤④">(5)</a> <a href="#ref-for-device⑤⑤">(6)</a>
    <li><a href="#ref-for-device⑤⑥">3.3.4. Scalability</a> <a href="#ref-for-device⑤⑦">(2)</a>
    <li><a href="#ref-for-device⑤⑧">3.3.5. User Experience</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="web-service">
   <b><a href="#web-service">#web-service</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-web-service">3.2.3. Alerting User and User Consent</a> <a href="#ref-for-web-service①">(2)</a>
    <li><a href="#ref-for-web-service②">3.2.5. Device Discovery</a>
    <li><a href="#ref-for-web-service③">3.3.1. Security</a>
    <li><a href="#ref-for-web-service④">3.3.2. Privacy</a> <a href="#ref-for-web-service⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="web-pki-certificate">
   <b><a href="#web-pki-certificate">#web-pki-certificate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-web-pki-certificate">3.1. Terminology</a> <a href="#ref-for-web-pki-certificate①">(2)</a>
    <li><a href="#ref-for-web-pki-certificate②">3.2.1. Guarantee of Device Trustworthiness</a> <a href="#ref-for-web-pki-certificate③">(2)</a> <a href="#ref-for-web-pki-certificate④">(3)</a> <a href="#ref-for-web-pki-certificate⑤">(4)</a>
    <li><a href="#ref-for-web-pki-certificate⑥">3.2.3. Alerting User and User Consent</a> <a href="#ref-for-web-pki-certificate⑦">(2)</a>
    <li><a href="#ref-for-web-pki-certificate⑧">3.3.4. Scalability</a> <a href="#ref-for-web-pki-certificate⑨">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="non-web-pki-certificate">
   <b><a href="#non-web-pki-certificate">#non-web-pki-certificate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-non-web-pki-certificate">3.1. Terminology</a> <a href="#ref-for-non-web-pki-certificate①">(2)</a>
    <li><a href="#ref-for-non-web-pki-certificate②">3.2.1. Guarantee of Device Trustworthiness</a>
    <li><a href="#ref-for-non-web-pki-certificate③">3.2.3. Alerting User and User Consent</a> <a href="#ref-for-non-web-pki-certificate④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ca">
   <b><a href="#ca">#ca</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ca">3.2.4. Certificate Management</a> <a href="#ref-for-ca①">(2)</a>
    <li><a href="#ref-for-ca②">3.3.1. Security</a> <a href="#ref-for-ca③">(2)</a>
    <li><a href="#ref-for-ca④">3.3.4. Scalability</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="private-ca">
   <b><a href="#private-ca">#private-ca</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-private-ca">3.3.3. Availability</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="device-identification">
   <b><a href="#device-identification">#device-identification</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-device-identification">3.3.1. Security</a> <a href="#ref-for-device-identification①">(2)</a>
    <li><a href="#ref-for-device-identification②">3.3.5. User Experience</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="device-discovery">
   <b><a href="#device-discovery">#device-discovery</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-device-discovery">3.3.1. Security</a>
    <li><a href="#ref-for-device-discovery①">3.3.2. Privacy</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>